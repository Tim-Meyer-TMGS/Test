<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Verteilseite · HTML-Dateien im Repo</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #0b1020;
    color: #e9edff;
    margin: 0;
    padding: 2rem;
  }
  h1 { margin-top: 0; }
  ul { list-style: none; padding: 0; }
  li {
    background: #101936;
    border: 1px solid #1d2748;
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 8px;
  }
  a {
    color: #5aa2ff;
    text-decoration: none;
  }
  a:hover { text-decoration: underline; }
  .meta { color:#aab2d5; font-size: 0.9rem; margin-bottom: 1rem; }
</style>
</head>
<body>
  <h1>Verteilseite</h1>
  <div class="meta" id="meta">lädt…</div>
  <ul id="list"></ul>

<script>
const OWNER = "tim-meyer-tmgs";   // <- dein GitHub-Nutzer
const REPO  = "Test";             // <- Repo-Name
const REF   = "main";             // <- Branch

const listEl = document.getElementById("list");
const metaEl = document.getElementById("meta");

function esc(s){ return String(s).replace(/[&<>]/g,ch=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[ch])); }

async function init(){
  metaEl.textContent = `Quelle: ${OWNER}/${REPO} @ ${REF} · zeigt *.html im Repo-Root`;

  try {
    const url = `https://api.github.com/repos/${OWNER}/${REPO}/contents/?ref=${REF}`;
    const res = await fetch(url,{headers:{'Accept':'application/vnd.github+json'}});
    if(!res.ok) throw new Error("Fehler " + res.status);
    const data = await res.json();

    const files = data
      .filter(e => e.type==="file" && /\.html?$/i.test(e.name) && !/^index\.html?$/i.test(e.name));

    if(!files.length){
      listEl.innerHTML = `<li>Keine .html-Dateien im Repo-Root gefunden.</li>`;
      return;
    }

    listEl.innerHTML = files.map(f=>{
      return `<li><a href="./${encodeURIComponent(f.name)}">${esc(f.name)}</a></li>`;
    }).join("");
  } catch(e){
    listEl.innerHTML = `<li>Fehler: ${esc(e.message)}</li>`;
  }
}

init();
</script>
</body>
</html>
